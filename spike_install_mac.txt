brew install dtc  # device tree compiler
brew install boost  # may be needed
brew install autoconf automake libtool pkg-config  # useful for building

# at directory : $HOME/Documents/IITH/comp_architecture/simulator_risc_v/
mkdir riscv_spike
cd riscv_spike
git clone https://github.com/riscv-software-src/riscv-isa-sim.git

cd riscv-isa-sim
mkdir build
cd build
../configure --prefix=$HOME/Documents/IITH/comp_architecture/simulator_risc_v/riscv_spike/install --with-isa=RV64IMAC
gmake -j4
gmake install

cd $HOME/Documents/IITH/comp_architecture/simulator_risc_v/riscv_spike
git clone https://github.com/riscv-software-src/riscv-pk.git
cd riscv-pk
mkdir build
cd build
../configure --prefix=$HOME/Documents/IITH/comp_architecture/simulator_risc_v/riscv_spike/install_pk --host=riscv64-unknown-elf
gmake -j4
gmake install

echo 'export PATH=$HOME/Documents/IITH/comp_architecture/simulator_risc_v/riscv_spike/install/bin:$PATH' >> ~/.zshrc
source ~/.zshrc

# spike $HOME/Documents/IITH/comp_architecture/simulator_risc_v/riscv_spike/install_pk/bin/pk hello
spike $HOME/Documents/IITH/comp_architecture/simulator_risc_v/riscv_spike/install_pk/riscv64-unknown-elf/bin/pk hello
